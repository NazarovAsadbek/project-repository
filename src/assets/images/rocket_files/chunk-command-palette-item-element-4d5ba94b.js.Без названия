System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-copy.js"],function(l){"use strict";var h,y,z,S,k,d,J,F,X,Y,Z,V;return{setters:[function(p){h=p.i,y=p.t,z=p.b,S=p.c,k=p.R,d=p.U,J=p.d},function(p){F=p.aE,X=p.aF,Y=p.k,Z=p.aG},function(p){V=p.c}],execute:function(){var p=function(){for(var e=new Uint32Array(256),t=256;t--;){for(var s=t,r=8;r--;)s=s&1?3988292384^s>>>1:s>>>1;e[t]=s}return function(i){var n=-1;typeof i=="string"&&(i=function(b){for(var H=b.length,Te=new Array(H),U=-1;++U<H;)Te[U]=b.charCodeAt(U);return Te}(i));for(var a=0,o=i.length;a<o;a++)n=n>>>8^e[n&255^i[a]];return(n^-1)>>>0}}(),Ee=function(e){return e<0&&(e=4294967295+e+1),("0000000"+e.toString(16)).slice(-8)},ee=function(e,t){var s=p(e);return t?Ee(s):s},Se=Object.defineProperty,$e=(e,t)=>Se(e,"name",{value:t,configurable:!0});class q{constructor(t){this.title=t.title,this.priority=t.priority,this.group=t.group,this.subtitle=t.subtitle,this.matchFields=t.matchFields,this.typeahead=t.typeahead,this.hint=t.hint,this.icon=t.icon}get matchingFields(){return this.matchFields?this.matchFields:[this.title]}get key(){var t;return`${this.title}-${this.group}-${this.subtitle}-${(t=this.matchFields)==null?void 0:t.join("-")}`}get id(){return this._id||(this._id=ee(this.key).toString()),this._id}calculateScore(t){const s=this.matchingFields.map(r=>this.calculateScoreForField({field:r,queryText:t}));return Math.max(...s)}calculateScoreForField({field:t,queryText:s}){return F(s,t)?X(s,t):-1/0}}$e(q,"Item");var te=Object.defineProperty,xe=Object.getOwnPropertyDescriptor,N=(e,t)=>te(e,"name",{value:t,configurable:!0}),j=(e,t,s,r)=>{for(var i=r>1?void 0:r?xe(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&te(t,s,i),i};const Ce=14,ke=20,Me=20,we=55;let f=l("e",class extends HTMLElement{constructor(){super(...arguments);this.smallDisplay=!1}connectedCallback(){this.classList.add("d-inline-flex")}get lastToken(){return this.tokens[this.tokens.length-1]}get text(){return this.tokens.map(e=>e.text).join("/")}get id(){return this.lastToken?this.lastToken.id:f.emptyScope.id}get type(){return this.lastToken?this.lastToken.type:f.emptyScope.type}get scope(){return this.hasScope()?{text:this.text,type:this.type,id:this.id,tokens:this.tokens}:f.emptyScope}set scope(e){this.renderTokens(e.tokens)}renderTokens(e){this.clearScope();let t=0,s=e.length;const r=this.smallDisplay?Ce:Me,i=this.smallDisplay?ke:we;for(let o=e.length-1;o>=0&&!(t+Math.min(e[o].text.length,r)+5>i);o--)t+=Math.min(e[o].text.length,r)+5,s=o;const n=N(o=>d`${o.map(a)}`,"tokensTemplate"),a=N((o,b)=>{const H=o.text.length>r?`${o.text.substring(0,r-3)}...`:o.text;return d`
        <command-palette-token
          data-text="${o.text}"
          data-id="${o.id}"
          data-type="${o.type}"
          data-value="${o.value}"
          data-targets="command-palette-scope.tokens"
          hidden="${b<s}"
          class="color-fg-default text-semibold"
          style="white-space:nowrap;line-height:20px;"
          >${H}<span class="color-fg-subtle text-normal">&nbsp;&nbsp;/&nbsp;&nbsp;</span>
        </command-palette-token>
      `},"tokenTemplate");k(n(e),this),this.hidden=!this.hasScope(),s!==0&&(this.placeholder.hidden=!1)}removeToken(){this.lastToken&&(this.lastRemovedToken=this.lastToken,this.lastToken.remove(),this.renderTokens(this.tokens))}hasScope(){return this.tokens.length>0&&this.type&&this.id&&this.text}clearScope(){for(const e of this.tokens)e.remove();this.placeholder.hidden=!0}attributeChangedCallback(e,t,s){e==="data-small-display"&&t!==s&&this.renderTokens(this.tokens)}});N(f,"CommandPaletteScopeElement"),f.emptyScope={type:"",text:"",id:"",tokens:[]},j([h],f.prototype,"smallDisplay",2),j([y],f.prototype,"placeholder",2),j([z],f.prototype,"tokens",2),f=l("e",j([S],f));var se=Object.defineProperty,je=Object.getOwnPropertyDescriptor,ie=(e,t)=>se(e,"name",{value:t,configurable:!0}),P=(e,t,s,r)=>{for(var i=r>1?void 0:r?je(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&se(t,s,i),i};let c=l("C",class extends HTMLElement{constructor(){super(...arguments);this.defaultPriority=0}connectedCallback(){this.classList.add("py-2","border-top"),this.setAttribute("hidden","true"),this.renderElement("")}prepareForNewItems(){this.list.innerHTML="",this.setAttribute("hidden","true"),this.classList.contains("border-top")||this.classList.add("border-top")}hasItem(e){return this.list.querySelectorAll(`[data-item-id="${e.id}"]`).length>0}renderElement(e){k(ie(()=>this.hasTitle?d`
          <div class="d-flex flex-justify-between my-2 px-3">
            <span data-target="command-palette-item-group.header" class="color-fg-muted text-bold f6 text-normal">
              ${this.groupTitle}
            </span>
            <span data-target="command-palette-item-group.header" class="color-fg-muted f6 text-normal">
              ${e?"":this.groupHint}
            </span>
          </div>
          <div
            role="listbox"
            class="list-style-none"
            data-target="command-palette-item-group.list"
            aria-label="${this.groupTitle} results"
          ></div>
        `:d`
          <div
            role="listbox"
            class="list-style-none"
            data-target="command-palette-item-group.list"
            aria-label="${this.groupTitle} results"
          ></div>
        `,"groupTemplate")(),this)}push(e){this.removeAttribute("hidden"),this.topGroup&&this.atLimit?e.itemId!==this.firstItem.itemId&&this.replaceTopGroupItem(e):this.list.append(e)}replaceTopGroupItem(e){this.list.replaceChild(e,this.firstItem)}groupLimitForScope(){const e=this.closest("command-palette");if(e){const t=e.query.scope.type;return JSON.parse(this.groupLimits)[t]}}get limit(){const e=this.groupLimitForScope();return this.topGroup?1:this.isModeActive()?50:e||c.defaultGroupLimit}isModeActive(){const e=this.closest("command-palette");return e?e.getMode():!1}get atLimit(){return this.list.children.length>=this.limit}get topGroup(){return this.groupId===c.topGroupId}get hasTitle(){return this.groupId!==c.footerGroupId}get itemNodes(){return this.list.querySelectorAll("command-palette-item")}get firstItem(){return this.itemNodes[0]}get lastItem(){return this.itemNodes[this.itemNodes.length-1]}});ie(c,"CommandPaletteItemGroupElement"),c.defaultGroupLimit=5,c.topGroupId="top",c.defaultGroupId="default",c.footerGroupId="footer",c.helpGroupIds=["modes_help","filters_help"],c.commandGroupIds=["commands"],c.topGroupScoreThreshold=9,P([h],c.prototype,"groupTitle",2),P([h],c.prototype,"groupHint",2),P([h],c.prototype,"groupId",2),P([h],c.prototype,"groupLimits",2),P([h],c.prototype,"defaultPriority",2),P([y],c.prototype,"list",2),P([y],c.prototype,"header",2),c=l("C",P([S],c));var Ae=Object.defineProperty,Oe=(e,t)=>Ae(e,"name",{value:t,configurable:!0});class G extends HTMLElement{constructor(){super(...arguments);this.isSetup=!1}connectedCallback(){this.isSetup=!0}async fetchWithDebounce(t,s){return this._lastFetchQuery=t,await this.delay(this.provider.debounce),this._lastFetchQuery!==t?{results:[]}:this.provider.fetch(t,s)}delay(t){return new Promise(s=>setTimeout(s,t))}}l("c",G),Oe(G,"ProviderElement");var re=Object.defineProperty,Le=Object.getOwnPropertyDescriptor,De=(e,t)=>re(e,"name",{value:t,configurable:!0}),ne=(e,t,s,r)=>{for(var i=r>1?void 0:r?Le(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&re(t,s,i),i};let $=class extends G{static build(e,t){const s=new $;return s.providerId=e,s.provider=t,s}};De($,"ClientDefinedProviderElement"),ne([h],$.prototype,"providerId",2),$=ne([S],$);var He=Object.defineProperty,ae=(e,t)=>He(e,"name",{value:t,configurable:!0});function I(e){m.register(e)}ae(I,"legacyItem");const oe=class extends q{constructor(e){super(e);this.position="",this.score=e.score,this.scope=e.scope,this.matchFields=e.match_fields,this._action=e.action}static register(e){this.itemClasses[e.itemType]=e}static get itemType(){return this.buildItemType(this.name)}static buildItemType(e){return e.replace(/([A-Z]($|[a-z]))/g,"_$1").replace(/(^_|_Item$)/g,"").toLowerCase()}static build(e){const t=this.itemClasses[e.action.type];if(t)return new t(e);throw new Error(`No item handler for ${e.action.type}`)}get action(){return this._action}get key(){return`${this.action.type}/${this.title}/${this.group}`}get path(){return this.action.path||""}get itemType(){return oe.buildItemType(this.constructor.name)}select(e){}deselect(e){}activate(e,t){}activateLinkBehavior(e,t,s){var r;(r=this.element)==null||r.activateLinkBehavior(e,t,s)}copy(e){}copyToClipboardAndAnnounce(e,t){var s;(s=this.element)==null||s.copyToClipboardAndAnnounce(e,t)}autocomplete(e){const t=e.commandPaletteInput,s=this.typeahead;s!==void 0?t.value=t.overlay+s:t.value=t.overlay+this.title}};let m=oe;ae(m,"LegacyItem"),m.itemClasses={},m.defaultData={title:"",score:1,priority:1,action:{type:"",path:""},icon:{type:"octicon",id:"dash-color-fg-muted"},group:c.defaultGroupId};var Fe=Object.defineProperty,qe=(e,t)=>Fe(e,"name",{value:t,configurable:!0});class T{constructor(t,s,{scope:r,subjectId:i,subjectType:n,returnTo:a}={}){this.queryText=t,this.queryMode=s,this.scope=r!=null?r:f.emptyScope,this.subjectId=i,this.subjectType=n,this.returnTo=a}get text(){return this.queryText}get mode(){return this.queryMode}get path(){return this.buildPath(this)}buildPath(t,s=t.text){return`scope:${t.scope.type}-${t.scope.id}/mode:${t.mode}/query:${s}`}clearScope(){this.scope=f.emptyScope}hasScope(){return this.scope.id!==f.emptyScope.id}isBlank(){return this.text.trim().length===0}isPresent(){return!this.isBlank()}immutableCopy(){const t=this.text,s=this.mode,r={...this.scope};return new T(t,s,{scope:r,subjectId:this.subjectId,subjectType:this.subjectType,returnTo:this.returnTo})}hasSameScope(t){return this.scope.id===t.scope.id}params(){const t=new URLSearchParams;return this.isPresent()&&t.set("q",this.text),this.hasScope()&&t.set("scope",this.scope.id),this.mode&&t.set("mode",this.mode),this.returnTo&&t.set("return_to",this.returnTo),this.subjectId&&t.set("subject",this.subjectId),t}}l("Q",T),qe(T,"Query");var Ne=Object.defineProperty,Ge=(e,t)=>Ne(e,"name",{value:t,configurable:!0});class ce{fuzzyFilter(t,s,r=0){const i=[];for(const n of t)n.calculateScore(s.text)>r&&i.push(n);return i}}Ge(ce,"ProviderBase");var Re=Object.defineProperty,We=(e,t)=>Re(e,"name",{value:t,configurable:!0});class R extends ce{constructor(t){super();this.element=t}get type(){return this.element.type}get modes(){return this.element.modes}get debounce(){return this.element.debounce}get scopeTypes(){return this.element.scopeTypes}get src(){return this.element.src}get hasWildCard(){return this.element.hasWildCard}get hasCommands(){return this.element.hasCommands}fetch(t,s){throw new Error("Method not implemented.")}enabledFor(t){throw new Error("Method not implemented.")}clearCache(){throw new Error("Method not implemented.")}}l("S",R),We(R,"ServerDefinedProvider");var Ke=Object.defineProperty,Qe=(e,t)=>Ke(e,"name",{value:t,configurable:!0});class W extends R{fetch(t,s){return this.fetchSrc(t)}enabledFor(t){return this.modeMatch(t)&&this.scopeMatch(t)}clearCache(){}scopeMatch(t){return this.scopeTypes.length===0||this.scopeTypes.includes(t.scope.type)}modeMatch(t){return this.modes.includes(t.mode)||this.hasWildCard}async fetchSrc(t,s=""){var r;if(!this.src)throw new Error("No src defined");const i=new URL(this.src,window.location.origin),n=t.params();s&&n.set("mode",s),i.search=n.toString();const a=await fetch(i.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(a.ok){const o=await a.json();return{results:((r=o.results)==null?void 0:r.map(b=>m.build(b)))||[],octicons:o.octicons}}else return{error:!0,results:[]}}}l("R",W),Qe(W,"RemoteProvider");var Be=Object.defineProperty,Ue=(e,t)=>Be(e,"name",{value:t,configurable:!0});class K extends W{constructor(){super(...arguments);this.maxItems=1e3,this.scopedItems={}}clearCache(){super.clearCache(),this.scopedItems={}}get debounce(){return 0}async prefetch(t){if(this.scopedItems[t.scope.id])return;const s=new T("",t.mode,{subjectId:t.subjectId,subjectType:t.subjectType,returnTo:t.returnTo,scope:t.scope}),r=await this.fetchSrc(s,t.mode);this.octicons=r.octicons||[];const i=r.results||[];this.scopedItems[t.scope.id]=i}async fetch(t,s){const r=this.scopedItems[t.scope.id]||[];return t.isBlank()?{results:r.slice(0,this.maxItems)}:{results:this.fuzzyFilter(r,t).slice(0,this.maxItems)}}}l("P",K),Ue(K,"PrefetchedProvider");var le=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,Je=(e,t)=>le(e,"name",{value:t,configurable:!0}),Xe=(e,t,s,r)=>{for(var i=r>1?void 0:r?ze(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&le(t,s,i),i};let A=class extends m{constructor(e){super(e);this.typeahead=e.title,this.group="commands"}get action(){return this._action}async activate(e){super.activate(e);const t=e.getAttribute("data-commands-path"),s=e.querySelector(".js-commands-csrf").value;if(!t||!s)return;const r=e.query.params();r.set("command",this.action.id),e.commandPaletteInput.loading=!0;const i=await fetch(t,{method:"POST",mode:"same-origin",headers:{Accept:"application/json","Scoped-CSRF-Token":s,"X-Requested-With":"XMLHttpRequest"},body:r});if(e.commandPaletteInput.loading=!1,i.ok){const n=await i.json();this.handleResponse(e,n.action,n.arguments)}else e.displayFlash("error","Failed to run command")}handleResponse(e,t,s){switch(t){case"displayFlash":e.displayFlash(s.type,s.message),e.clearProviderCaches(),e.dismiss(),e.itemStackElement.clear(),e.commandPaletteInput.value="";break}}};Je(A,"CommandItem"),A=Xe([I],A);var he=Object.defineProperty,Ye=Object.getOwnPropertyDescriptor,Ze=(e,t)=>he(e,"name",{value:t,configurable:!0}),Ve=(e,t,s,r)=>{for(var i=r>1?void 0:r?Ye(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&he(t,s,i),i};let E=l("J",class extends m{static from(e){return new E({title:e.title,typeahead:e.title,priority:1,score:1,group:e.group,action:{type:"jump_to",description:"",path:e.path},icon:{type:"octicon",id:e.icon}})}activate(e,t){t instanceof PointerEvent?super.activate(e,t):t instanceof KeyboardEvent&&this.activateLinkBehavior(e,t,ue(t))}copy(e){super.copy(e);const t=new URL(this.action.path,window.location.origin);return this.copyToClipboardAndAnnounce(t.toString()),t.toString()}get key(){return`${super.key}/${this.action.path}`}get action(){return this._action}});Ze(E,"JumpToItem"),E=l("J",Ve([I],E));var et=Object.defineProperty,tt=(e,t)=>et(e,"name",{value:t,configurable:!0});class Q extends q{constructor(t){super({title:t.title,subtitle:t.subtitle,typeahead:t.title,priority:t.priority,group:t.group,icon:{type:"octicon",id:t.icon},hint:"Run command"});this.command=t}get path(){}copy(t){}activate(t){this.command.run(t),t.clearProviderCaches(),t.dismiss(),t.itemStackElement.clear(),t.commandPaletteInput.value=""}isApplicable(t){return this.command.isApplicable(t)}select(){this.command.select()}deselect(){this.command.deselect()}}l("M",Q),tt(Q,"MainWindowCommandItem");var st=Object.defineProperty,pe=(e,t)=>st(e,"name",{value:t,configurable:!0});function M(e,t){const s=document.querySelector("command-palette");let r="";t&&(t.group==="commands"||t.group==="global_commands")&&(r=t.title);const i={command_palette_session_id:s.sessionId,command_palette_scope:s.query.scope.type,command_palette_mode:s.getMode(),command_palette_title:r,command_palette_position:t==null?void 0:t.position,command_palette_score:t==null?void 0:t.score,command_palette_group:t==null?void 0:t.group,command_palette_item_type:t instanceof m?t==null?void 0:t.itemType:t==null?void 0:t.constructor.name};let n;e==="activate"?n=de(t):n=e,Y(`command_palette_${n}`,i)}pe(M,"sendTrackingEvent");function de(e){var t;return e instanceof x?"access_policy_executed":e instanceof A||e instanceof Q?"command_executed":e instanceof E?((t=e.element)==null?void 0:t.newTabOpened)?"jump_to_new_tab":"jump_to":"activate"}pe(de,"activateTrackingEventType");var me=Object.defineProperty,it=Object.getOwnPropertyDescriptor,B=(e,t)=>me(e,"name",{value:t,configurable:!0}),_=(e,t,s,r)=>{for(var i=r>1?void 0:r?it(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&me(t,s,i),i};const O=B(()=>navigator.platform.match(/Mac/),"isMac"),rt=O()?"metaKey":"ctrlKey",nt=O()?"Meta":"Control",ue=l("i",B(e=>e instanceof KeyboardEvent?e[rt]:!1,"isPlatformMetaKey")),fe=450;let g=l("d",class extends HTMLElement{constructor(){super(...arguments);this.activated=!1,this.error=!1,this.query=new T("",""),this.requestsInProgress=[],this.setupComplete=!1,this.sessionId="",this.returnTo="",this.userId="",this.multiPageEnabled=!1,this.activationHotkey="Mod+k,Mod+Alt+k",this.commandModeHotkey="Mod+Shift+k,Control+K",this.memexActivationHotkey="Mod+p"}setup(){this.modes=Array.from(this.querySelectorAll("command-palette-mode")),this.defaultMode=this.querySelector(".js-command-palette-default-mode"),this.commandPaletteInput=this.querySelector("command-palette-input"),this.groups=this.querySelectorAll("command-palette-item-group"),this.multiPageEnabled?this.addEventListener("itemsUpdated",this.itemsUpdated.bind(this)):(this.itemStackElement=this.querySelector("command-palette-item-stack"),this.itemStackElement.getQuery=()=>this.query,this.itemStackElement.addEventListener("itemsUpdated",this.itemsUpdated.bind(this))),this.addEventListener("selectedItemChanged",s=>{if(s instanceof CustomEvent){const r=s.detail.item,i=s.detail.isDefaultSelection;this.updateTypeahead(r,i)}}),this.addEventListener("loadingStateChanged",s=>{s instanceof CustomEvent&&(this.commandPaletteInput.loading=s.detail.loading)}),this.addEventListener("command-palette-page-stack-updated",s=>{s instanceof CustomEvent&&(this.commandPaletteInput.scope=this.pageStack.scope)}),this.octicons={},this.commandPaletteInput.addEventListener("command-palette-input",this.onInput.bind(this)),this.commandPaletteInput.addEventListener("command-palette-select",this.onSelect.bind(this)),this.commandPaletteInput.addEventListener("command-palette-descope",this.onDescope.bind(this)),this.commandPaletteInput.addEventListener("command-palette-cleared",this.onInputClear.bind(this)),document.addEventListener("pjax:end",this.pjaxReset.bind(this)),new ResizeObserver(s=>{for(const r of s)this.commandPaletteInput.scopeElement.smallDisplay=r.contentRect.width<fe}).observe(this),this.addEventListener("keydown",this.onKeydown.bind(this)),this.defaultOpen&&(this.manualToggle(!0),this.clearReturnToParams()),window.commandPalette=this,this.setupComplete=!0;const t=new Event("command-palette-ready",{bubbles:!0,cancelable:!0});this.dispatchEvent(t)}connectedCallback(){this.setupComplete||this.setup()}clear(e=!0){return this.clearProviderCaches(),this.multiPageEnabled||this.itemStackElement.clear(),e&&this.resetInput(),this.activated?this.prefetchProviderData():Promise.resolve()}clearCommands(e=!0){return this.clearCommandProviderCaches(),this.multiPageEnabled||this.itemStackElement.clearItemsFor(c.commandGroupIds),e&&this.resetInput(),this.activated?this.prefetchProviderData({providers:this.commandsProviderElements}):Promise.resolve()}resetInput(){this.commandPaletteInput.value="",this.commandPaletteInput.resetScopeIfNeeded()}activate(){if(this.sessionId=this.generateSessionId(),this.commandPaletteInput.scopeElement.smallDisplay=this.offsetWidth<fe,this.commandPaletteInput.resetScopeIfNeeded(),this.commandPaletteInput.focus(),this.setActiveModeElement(),this.setQuery(),this.multiPageEnabled)this.pageStack.currentPage.prefetch(),this.pageStack.bindListeners();else if(this.toggleTips(),this.prefetchProviderData(),this.updateOverlay(),this.itemStackElement.bindListeners(),this.commandPaletteInput.hasScope()){const e=new T(this.query.queryText,this.query.queryMode,{subjectId:this.query.subjectId,subjectType:this.query.subjectType,returnTo:this.query.returnTo});this.prefetchProviderData({query:e})}this.activated=!0,M("session_initiated")}deactivate(){this.activated=!1,this.multiPageEnabled?this.pageStack.unbindListeners():(this.itemStackElement.clearSelection(),this.itemStackElement.unbindListeners()),this.previouslyActiveElement&&this.previouslyActiveElement.focus(),M("session_terminated")}generateSessionId(){return ee(`${Date.now()}_${this.userId}_${this.query.path}`).toString()}manualToggle(e){const t=this.closest("details");e?t.open=!0:t.removeAttribute("open")}dismiss(){this.manualToggle(!1)}get subjectId(){var e;return((e=this.pjaxMeta)==null?void 0:e.getAttribute("data-subject-id"))||""}get subjectType(){var e;return((e=this.pjaxMeta)==null?void 0:e.getAttribute("data-subject-type"))||""}get pjaxMeta(){return document.querySelector(".js-command-palette-pjax-meta-data")}get secondaryActivationHotkey(){const e=this.activationHotkey.split(",");return e.length>1?e[e.length-1]:""}get platformActivationHotkey(){return this.platformHotkey(this.activationHotkey)}get platformSecondardActivationHotkey(){return this.platformHotkey(this.secondaryActivationHotkey)}get platformCommandModeHotkey(){return this.platformHotkey(this.commandModeHotkey)}get platformMemexActivationHotkey(){return this.platformHotkey(this.memexActivationHotkey)}platformHotkey(e){if(e==="none")return"";let t=e;if(O())t=t.replace(/Mod\+Alt/g,"Alt+Mod");else if(t.includes("Shift")){const s=t.charAt(t.length-1);t+=`,${t.replace(`Shift+${s}`,s.toUpperCase())}`}return t.replace(/Mod/g,nt)}pjaxReset(){this.activated=!1,this.clear(!0)}onInput(){this.commandPaletteInput.typeahead="",this.setActiveModeElement(),this.setQuery(),this.activated&&this.fetchProviderData(),this.multiPageEnabled||(this.itemStackElement.updateSelectedItem(),this.toggleTips()),this.updateOverlay()}updateOverlay(){const e=this.getMode();this.commandPaletteInput.overlay=e;for(const t of this.groups)t.renderElement(e);if(e&&this.getTextWithoutMode()===""){const t=this.getModeElement().placeholder||"";this.commandPaletteInput.showModePlaceholder(t)}else this.commandPaletteInput.showModePlaceholder("")}itemsUpdated(e){if(!(e instanceof CustomEvent))return;const s=e.detail.items.filter(a=>a.group!==c.footerGroupId),r=s.filter(a=>!c.helpGroupIds.includes(a.group)),i=s.length>r.length,n=this.finishedLoading&&r.length===0&&this.activated;r.length>0?(this.toggleEmptyState(!1,i),this.multiPageEnabled&&this.toggleTips()):n&&(this.toggleEmptyState(!0,i),this.toggleTips()),this.toggleErrorTips()}setActiveModeElement(){const e=this.commandPaletteInput.value.substring(0,1),t=this.modes.filter(s=>s.active(this.query.scope,e)).find(s=>s.character()===e);this.activeMode=t||this.defaultMode,this.multiPageEnabled&&(this.pageStack.currentMode=this.activeMode.character())}setQuery(){this.query=new T(this.getTextWithoutMode().trimStart(),this.getMode(),{scope:this.commandPaletteInput.scope,subjectId:this.subjectId,subjectType:this.subjectType,returnTo:this.returnTo}),this.multiPageEnabled&&(this.pageStack.currentQueryText=this.getTextWithoutMode().trimStart())}getModeElement(){return this.activeMode}getMode(){var e;return(e=this.getModeElement())==null?void 0:e.character()}getTextWithoutMode(){if(!this.commandPaletteInput)return"";const e=this.commandPaletteInput.value,t=this.getMode();return t&&e.startsWith(t)?e.substring(1):e}get selectedItem(){return this.multiPageEnabled?this.pageStack.currentPage.selectedItem:this.itemStackElement.selectedItem}onSelect(e){this.selectedItem?this.selectedItem.item instanceof m&&this.selectedItem.item.scope?this.setScope(this.selectedItem.item.scope):this.autocomplete(this.selectedItem.item):e.preventDefault()}autocomplete(e){if(e instanceof m)e.autocomplete(this);else{const t=this.commandPaletteInput;e.typeahead!==void 0?t.value=t.overlay+e.typeahead:t.value=t.overlay+e.title}}setScope(e){if(this.multiPageEnabled){const t=e||this.commandPaletteInput.scope;for(const s of t.tokens){const r=s===t.tokens[t.tokens.length-1];this.pageStack.push({title:s.value,scopeId:s.id,scopeType:s.type,hidden:!r})}this.commandPaletteInput.value=""}else this.itemStackElement.clearSelection(),e&&(this.commandPaletteInput.scope=e),this.commandPaletteInput.value="",this.setQueryScope(),this.toggleTips(),this.prefetchProviderData()}onDescope(){if(this.multiPageEnabled){this.pageStack.pop();return}if(this.commandPaletteInput.hasScope()){const t=this.commandPaletteInput.value;this.commandPaletteInput.removeToken(),this.setScope(),this.commandPaletteInput.setRemovedTokenAndSelect(t)}}onInputClear(){this.multiPageEnabled?this.pageStack.clear():(this.commandPaletteInput.clearScope(),this.setScope())}onKeydown(e){var t;e.key==="Enter"&&this.selectedItem?((t=this.selectedItem)==null||t.activate(this,e),e.preventDefault(),e.stopPropagation()):e.key==="ArrowDown"?(this.navigateToItem(1),e.preventDefault(),e.stopPropagation()):e.key==="ArrowUp"?(this.navigateToItem(-1),e.preventDefault(),e.stopPropagation()):this.isCopyEvent(e)&&this.selectedItem&&(this.selectedItem.copy(this),e.preventDefault(),e.stopPropagation())}navigateToItem(e){this.multiPageEnabled?this.pageStack.navigate(e):this.itemStackElement.navigate(e)}toggleTips(){const e=this.modeTips.filter(s=>s.available(this.query)),t=e[Math.floor(Math.random()*e.length)];for(const s of this.modeTips)s.hidden=t!==s;this.multiPageEnabled?(this.pageStack.hasVisibleTip=!!t,this.pageStack.currentPage.recomputeStyles()):this.finishedLoading&&this.itemStackElement.setMaxHeight()}toggleEmptyState(e,t){for(const s of this.emptyStateElements)s.toggle(this.query,e);if(!t&&e){const s=this.serverDefinedProviderElements.find(r=>r.type==="help");s&&this.fetchProviderData([s],{isEmpty:!0})}else t&&!e&&!this.multiPageEnabled&&this.itemStackElement.clearItemsFor(c.helpGroupIds);this.finishedLoading&&!this.multiPageEnabled&&this.itemStackElement.setMaxHeight()}toggleErrorTips(){for(const e of this.errorStateTips)e.toggle(this.query,!1,this.error)}updateTypeahead(e,t=!1){var s,r;this.getTextWithoutMode()===""&&(!e||t)?this.commandPaletteInput.typeahead="":e&&(this.commandPaletteInput.typeahead=(r=(s=e.typeahead)!=null?s:e.title)!=null?r:"")}isCopyEvent(e){return this.commandPaletteInput.textSelected()?!1:O()?e.metaKey&&e.key==="c":e.ctrlKey&&e.key==="c"}setQueryScope(){this.query.scope=this.commandPaletteInput.scope}async prefetchProviderData(e={}){if(this.multiPageEnabled)return;const s={...{query:this.query,providers:this.providerElements},...e};await Promise.all(Array.from(s.providers).map(async r=>{const i=r.provider;if(i instanceof K){if(!i.scopeMatch(this.query))return;await i.prefetch(s.query.immutableCopy()),this.cacheIcons(i.octicons)}await this.fetchProviderData([r],{prefillItemStack:!0})}))}async fetchProviderData(e,t={}){if(this.multiPageEnabled)return;const r={...{prefillItemStack:!1,isEmpty:!1},...t},i=e!=null?e:this.providerElements;this.error=!1,await this.fetchWithSpinner(i.map(async n=>{if(!n.provider.enabledFor(this.query))return;const a=this.query.immutableCopy(),o=await n.fetchWithDebounce(a,r.isEmpty);o&&(o.error&&(this.error=!0,this.toggleErrorTips()),o.octicons&&this.cacheIcons(o.octicons)),this.multiPageEnabled||this.itemStackElement.addItems(a,o.results,r.prefillItemStack)}))}async fetchWithSpinner(e){this.requestsInProgress.push(e),this.commandPaletteInput.loading=!0,await Promise.all(e),this.requestsInProgress.splice(this.requestsInProgress.indexOf(e),1),this.commandPaletteInput.loading=this.requestsInProgress.length>0}get serverDefinedProviderElements(){const e=this.querySelectorAll("server-defined-provider");return Array.from(e)}get clientDefinedProviderElements(){const e=this.querySelectorAll("client-defined-provider");return Array.from(e)}get providerElements(){return[...this.serverDefinedProviderElements,...this.clientDefinedProviderElements]}get commandsProviderElements(){return this.providerElements.filter(e=>e.provider.hasCommands)}clearProviderCaches(){for(const e of this.providerElements)e.provider.clearCache()}clearCommandProviderCaches(){for(const e of this.commandsProviderElements)e.provider.clearCache()}registerProvider(e,t){const s=this.querySelector(`client-defined-provider[data-provider-id="${e}"]`);s&&s.remove();const r=$.build(e,t);this.appendChild(r)}get tipElements(){const e=this.querySelectorAll("command-palette-tip");return Array.from(e)}get modeTips(){return this.tipElements.filter(e=>!e.onEmpty&&!e.onError)}get emptyStateElements(){return this.tipElements.filter(e=>e.onEmpty)}get errorStateTips(){return this.tipElements.filter(e=>e.onError)}get finishedLoading(){return this.requestsInProgress.length===0}get placeholder(){return this.getAttribute("placeholder")||""}get defaultOpen(){return this.getAttribute("data-default-open")!==null}clearReturnToParams(){const e=new URLSearchParams(location.search);e.delete("command_palette_open"),e.delete("command_query"),e.delete("command_mode"),e.delete("clear_command_scope"),history.replaceState(null,"",`?${e}${location.hash}`)}cacheIcons(e){if(!this.multiPageEnabled)for(const t of e)this.itemStackElement.octicons[t.id]=t.svg}displayFlash(e,t,s=!1,r=5e3){const i=document.querySelector(".js-command-palette-toasts");if(!i)return;const n=i.querySelectorAll(".Toast");for(const b of n)b.hidden=!0;const a=i.querySelector(`.Toast.Toast--${e}`);if(!a)return;const o=a.querySelector(".Toast-content");s?o.innerHTML=t:o.textContent=t,a.hidden=!1,setTimeout(()=>{a.hidden=!0},r)}});B(g,"CommandPalette"),g.tagName="command-palette",_([h],g.prototype,"returnTo",2),_([h],g.prototype,"userId",2),_([h],g.prototype,"multiPageEnabled",2),_([h],g.prototype,"activationHotkey",2),_([h],g.prototype,"commandModeHotkey",2),_([h],g.prototype,"memexActivationHotkey",2),_([y],g.prototype,"pageStack",2),_([J(250)],g.prototype,"clearCommands",1),g=l("d",_([S],g));var ge=Object.defineProperty,at=Object.getOwnPropertyDescriptor,ot=(e,t)=>ge(e,"name",{value:t,configurable:!0}),ct=(e,t,s,r)=>{for(var i=r>1?void 0:r?at(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&ge(t,s,i),i};let x=l("A",class extends m{activate(e,t){t instanceof PointerEvent?super.activate(e,t):t instanceof KeyboardEvent&&this.activateLinkBehavior(e,t,ue(t))}get key(){return this.title}});ot(x,"AccessPolicyItem"),x=l("A",ct([I],x));var ve=Object.defineProperty,lt=Object.getOwnPropertyDescriptor,ht=(e,t)=>ve(e,"name",{value:t,configurable:!0}),pt=(e,t,s,r)=>{for(var i=r>1?void 0:r?lt(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&ve(t,s,i),i};let C=l("H",class extends m{static from(e){return new C({title:e.title,typeahead:"",priority:-10-e.index,score:-10,group:e.group,action:{type:"help",description:"",prefix:e.prefix},persistentHint:e.persistentHint})}constructor(e){super(e);this.persistentHint=e.persistentHint}activate(e,t){e.commandPaletteInput.value=this.action.prefix+e.getTextWithoutMode()}autocomplete(e){e.commandPaletteInput.value=this.action.prefix+e.getTextWithoutMode()}calculateScore(e){return 0}get action(){return this._action}});ht(C,"HelpItem"),C=l("H",pt([I],C));var ye=Object.defineProperty,dt=Object.getOwnPropertyDescriptor,mt=(e,t)=>ye(e,"name",{value:t,configurable:!0}),ut=(e,t,s,r)=>{for(var i=r>1?void 0:r?dt(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&ye(t,s,i),i};let L=class extends E{};mt(L,"JumpToOrgItem"),L=ut([I],L);var be=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,gt=(e,t)=>be(e,"name",{value:t,configurable:!0}),vt=(e,t,s,r)=>{for(var i=r>1?void 0:r?ft(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&be(t,s,i),i};let D=class extends E{};gt(D,"JumpToTeamItem"),D=vt([I],D);var _e=Object.defineProperty,yt=Object.getOwnPropertyDescriptor,bt=(e,t)=>_e(e,"name",{value:t,configurable:!0}),_t=(e,t,s,r)=>{for(var i=r>1?void 0:r?yt(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&_e(t,s,i),i};let w=l("b",class extends E{static create(e){let t,s;if(e.scope.type==="repository")t=`in ${e.scope.text}`,s=`/${e.scope.text}/search?q=${e.text}`;else if(e.scope.type==="owner"){const r=`org:${e.scope.text} ${e.text}`;t=`in ${e.scope.text}`,s=`/search?q=${r}`}else t="across all of GitHub",s=`/search?q=${e.text}`;return new w({title:`Search ${e.text}${t}`,typeahead:"",priority:-10,score:-10,group:c.footerGroupId,action:{type:"jump_to",description:"",path:s},icon:{type:"octicon",id:"search-color-fg-muted"},titleScope:t})}constructor(e){super(e);this.titleScope=e.titleScope}autocomplete(e){}calculateScore(e){return 0}});bt(w,"SearchLinkItem"),w=l("b",_t([I],w));var Pe=Object.defineProperty,Pt=Object.getOwnPropertyDescriptor,Ie=(e,t)=>Pe(e,"name",{value:t,configurable:!0}),v=(e,t,s,r)=>{for(var i=r>1?void 0:r?Pt(t,s):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(i=(r?a(t,s,i):a(i))||i);return r&&i&&Pe(t,s,i),i};let u=l("a",class extends HTMLElement{constructor(){super(...arguments);this.itemId="",this.itemTitle="",this.subtitle="",this.selected=!1,this.score=0,this.titleNodes=[],this.rendered=!1,this.newTabOpened=!1,this.containerDataTarget="command-palette-item.containerElement",this.containerClasses="mx-2 px-2 rounded-2 d-flex flex-items-start no-underline border-0",this.containerStyle="padding-top: 10px; padding-bottom: 10px; cursor: pointer;"}activate(e,t){this.item.activate(e,t),M("activate",this.item)}copy(e){return M("copy",this.item),this.item.copy(e)}renderOcticon(e){this.iconElement.innerHTML=e}renderAvatar(e,t){let s;this.item instanceof L?s=d`<img src="${e}" alt="${t}" class="avatar avatar-1 avatar-small" />`:this.item instanceof D?s=d`<img src="${e}" alt="${t}" class="avatar avatar-1" />`:s=d`<img src="${e}" alt="${t}" class="avatar avatar-1 avatar-small circle" />`,k(s,this.iconElement)}setItemAttributes(e){var t;this.item=e,this.itemId=e.id,this.itemTitle=e.title,this.hint=e.hint,this.href=(t=e.path)!=null?t:"",e.subtitle&&(this.subtitle=e.subtitle),e instanceof m&&(e.element=this)}render(e,t){if(this.renderBaseElement(),e&&(this.selected=!0),this.item instanceof x&&this.item.typeahead)this.titleNodes=this.emphasizeTextMatchingQuery(this.item.title,this.item.typeahead);else if(this.item instanceof C){const s=document.createElement("span");s.innerHTML=this.item.title,this.titleNodes=[s],this.item.persistentHint&&(this.persistentHint.innerHTML=this.item.persistentHint,this.persistentHint.hidden=!1)}else if(this.item instanceof w&&t){const s=[];s.push(document.createTextNode("Search"));const r=document.createElement("strong");r.textContent=` '${t}' `,s.push(r),s.push(document.createTextNode(this.item.titleScope)),this.titleNodes=s}else t&&(this.titleNodes=this.emphasizeTextMatchingQuery(this.item.title,t));return this}connectedCallback(){this.subtitle&&this.subtitleElement.removeAttribute("hidden"),this.titleNodes.length>0&&(this.titleElement.textContent="",this.titleElement.append(...this.titleNodes))}onClick(e){this.activate(this.commandPalette,e)}get commandPalette(){return this.closest("command-palette")}attributeChangedCallback(e,t,s){this.rendered&&(e==="data-selected"?(this.setSelectionAppearance(),this.item instanceof m&&this.item.select(this)):e==="data-item-title"?this.titleElement.textContent=s:e==="data-subtitle"&&(this.subtitleElement.textContent=s))}setSelectionAppearance(){this.selected?(this.containerElement.classList.add("color-bg-subtle"),this.hintText.hidden=!1):(this.containerElement.classList.remove("color-bg-subtle"),this.hintText.hidden=!0)}renderLinkContainer(e){return d`
      <a
        data-target="${this.containerDataTarget}"
        data-action="click:command-palette-item#onClick"
        href="${this.href}"
        class="${this.containerClasses}"
        data-skip-pjax
        style="${this.containerStyle}"
      >
        ${e}
      </a>
    `}renderSpanContainer(e){return d`
      <span
        data-target="${this.containerDataTarget}"
        class="${this.containerClasses}"
        style="${this.containerStyle}"
        data-action="click:command-palette-item#onClick"
      >
        ${e}
      </span>
    `}renderElementContent(){return d`
      <div
        data-target="command-palette-item.iconElement"
        class="mr-2 color-fg-muted d-flex flex-items-center"
        style="height: 24px;"
      ></div>

      <div class="flex-1 d-flex flex-column" style="line-height: 24px;">
        <span data-target="command-palette-item.titleElement" class="color-fg-default f5">${this.itemTitle}</span>
        <p data-target="command-palette-item.subtitleElement" class="color-fg-muted f6 mb-0" hidden>${this.subtitle}</p>
      </div>

      <div class="color-fg-muted f5" style="line-height: 20px;">
        <span class="hide-sm" data-target="command-palette-item.hintText" style="line-height: 24px;" hidden
          >${this.getHint()}</span
        >
        <span
          class="hide-sm"
          data-target="command-palette-item.persistentHint"
          style="line-height: 24px;"
          hidden
        ></span>
      </div>
    `}renderBaseElement(){const e=this.renderElementContent();k(Ie(()=>this.href?this.renderLinkContainer(e):this.renderSpanContainer(e),"itemTemplate")(),this),this.rendered=!0}activateLinkBehavior(e,t,s){const r=this.containerElement;s&&r instanceof HTMLAnchorElement?(this.newTabOpened=!0,this.openLinkInNewTab(r)):(this.newTabOpened=!1,this.openLink(r))}openLinkInNewTab(e){const t=e.getAttribute("target");e.setAttribute("target","_blank"),e.click(),t?e.setAttribute("target",t):e.removeAttribute("target")}openLink(e){e.click()}copyToClipboardAndAnnounce(e,t){V(e);const s=this.hintText,r=s.textContent;s.classList.add("color-fg-success"),s.textContent=t!=null?t:"Copied!",setTimeout(()=>{s.classList.remove("color-fg-success"),s.textContent=r},2e3)}getHint(){return this.item instanceof x||this.item instanceof C?d``:this.hint?d`<span class="hide-sm">${this.hint}</span>`:this.item instanceof m&&this.item.scope?d`<div class="hide-sm">
        <kbd class="hx_kbd">Enter</kbd>
        to jump to
        <kbd class="hx_kbd ml-1">Tab</kbd>
        to search
      </div>`:d`<span class="hide-sm">Jump to</span>`}emphasizeTextMatchingQuery(e,t){if(!F(t,e))return[document.createTextNode(e)];const s=[];let r=0;for(const n of Z(t,e)){if(e.slice(r,n)!==""){const b=document.createTextNode(e.slice(r,n));s.push(b)}r=n+1;const o=document.createElement("strong");o.textContent=e[n],s.push(o)}const i=document.createTextNode(e.slice(r));return s.push(i),s}});Ie(u,"CommandPaletteItemElement"),v([h],u.prototype,"itemId",2),v([h],u.prototype,"itemTitle",2),v([h],u.prototype,"subtitle",2),v([h],u.prototype,"selected",2),v([h],u.prototype,"score",2),v([y],u.prototype,"titleElement",2),v([y],u.prototype,"iconElement",2),v([y],u.prototype,"subtitleElement",2),v([y],u.prototype,"hintText",2),v([y],u.prototype,"persistentHint",2),v([y],u.prototype,"containerElement",2),u=l("a",v([S],u))}}});
//# sourceMappingURL=chunk-command-palette-item-element-8be6a546.js.map
